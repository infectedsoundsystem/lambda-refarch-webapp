<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Vote App</title>

        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/css/bootstrap.min.css">

        <!-- Custom styles for this template -->
        <link rel="stylesheet" href="narrow.css">
        <link rel="stylesheet" href="vote.css">

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

    </head>

    <body>

        <div class="container">
            <div class="jumbotron2">
                <h1>Flame War!</h1>
                <h2>Which device is the best for gaming?
                    <strong class="pcmr">PC</strong>,
                    <strong class="peasant">Console</strong> or
                    <strong class="lolwut">Mobile/Tablet</strong>?
                </h2>
            </div>

            <div class="row">
                <div class="col-md-12"><canvas id="graph" class="inner cover" width="500" height="420"></canvas></div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <p class="lead">Cast your vote here:</p>
                    <p id="clicky-buttons">
                        <button type="button" class="btn btn-success btn-lg" data-vote="PCMR">PC</button>
                        <button type="button" class="btn btn-primary btn-lg" data-vote="PEASANT">Consoles</button>
                        <button type="button" class="btn btn-danger btn-lg" data-vote="LOLWUT">Mobiles/tablets</button>
                    </p>
                </div>
            </div>
            <hr/>

            <div class="row">
                <div class="col-md-12">
                    <p class="lead">This is a simple demonstration of <a href="http://aws.amazon.com/lambda/">Lambda</a>, a compute service from AWS that runs your code in response to events.</p>
                    <p>When a button is clicked, an ajax request is made to an API Gateway endpoint which then invokes a Lambda function to add the vote to a DynamoDB table. </p>
                    <p>The changes to the table are streamed to another Lambda function that aggregates the new vote totals and records these in another DynamoDB table. The totals from the aggregates table are used to create the graph above.</p>
                </div>
            </div>

            <footer class="footer">
                <p><a href="https://github.com/infectedsoundsystem/lambda-refarch-webapp">Source code</a>. Fork of <a href="https://github.com/awslabs/lambda-refarch-webapp">AWS Lambda Serverless Reference Architecture</a>. </p>
            </footer>

        </div> <!-- /container -->

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
        <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1.40.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
        <script src="refresh.js"></script>
    </body>
</html>
